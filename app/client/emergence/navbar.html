<template name="DOI_Navbar">
  <nav class="navbar navbar-default">
    <div class="container-fluid">
      <div class="navbar-header">
        {{> DOI_Title publication }}
      </div>
      <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
        {{> DOI_Menubar publication }}
      </div>
    </div>
  </nav>
</template>


<template name="DOI_Title">
  <div class="container">
    <h3 id="title_article">{{ title }}.</h3>
    <div id="authors">
        by
        {{#each author}}
            {{ last }}, {{ first }};
        {{/each}}
    </div>
    <span id="journal">
        {{ journal }}.
    </span>
    <span id="year">
        {{ year }}.
    </span>
    <a id="link" href="{{ publi.url }}">{{ doi }}</a>
  </div>
</template>


<template name="DOI_Menubar">
  <ul class="nav navbar-nav navbar-left">
    {{#each item }}
      {{#if there_is "href" }}
        <li>
            <a href="{{ href }}">
                {{#if there_is "icon" }}<i class="fa {{ icon }}"></i> {{/if}}
                {{ text }}
            </a>
        </li>
      {{else}}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"
             role="button" aria-haspopup="true" aria-expanded="false">
            {{#if there_is "icon" }}<i class="fa {{ icon }}"></i>{{/if}}
            {{ text }}
            <span class="caret"></span></a>
            <ul class="dropdown-menu">
              {{#each items }}
                {{#if separator }}
                  <li role="separator" class="divider"></li>
                  <li class="dropdown-header">{{ text }}</li>
                {{else}}
                  <li>
                    {{#if there_is modal}}
                        <a class="navbar_link" id="{{ id }}" href="#" data-toggle="modal" data-target="#{{ item2.modal.id }}">
                          {{#if there_is "icon" }}<i class="fa {{ icon }}"></i> {{/if}}
                          {{ text }}
                        </a>
                    {{else}}
                      <a class="navbar_link" id="{{ id }}" href="{{ href }}">
                        {{#if there_is "icon" }}<i class="fa {{ icon }}"></i> {{/if}}
                        {{ text }}
                      </a>
                    {{/if}}
                  </li>
                {{/if}}
              {{/each}}
            </ul>
        </li>
      {{/if}}
    {{/each}}
  </ul>

<!-- Align right -->
  <ul class="nav navbar-nav navbar-right">
    {{> loginButtons}} <!-- here -->
</ul>
</template>


<template name="ModalContext">
  {{! #if show_modal }}
    {{> MainModal modalcontext }}
  {{! /if}}
</template>


<template name="MainModal">
  <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="{{ id }}Label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form class="process" id="{{ id }}">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel" >
                {{ modal.title }}
            </h4>
          </div>
          <div class="modal-body">
            {{#if undefined modal.template }}
            Sorry this feature hasn't been implemented yet. Do you need it badly?
            You can always increase the priority of this task by <a href="https://coinkite.com/pay/04815AF9C7-2C4BC4">
            voting with your money</a>.
            {{else}}
            {{> Template.dynamic template=modal.template }}
            {{/if}}
          </div>
          <div class="well collapse out" id="help-well">
              <h5>Help</h5>
              <div id="#help-text">
                {{#if undefined modal.helps }}
                  Sorry, no help is available for that modal. If things are not clear,
                  please give us some feedbacks to help us making this website more relevant for you and your
                  research field.
                {{else}}
                  {{ modal.helps }}
                {{/if}}
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default">Feedbacks</button>
              <button type="button" class="btn btn-default" data-toggle="collapse" data-target="#help-well">Help</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Register</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</template>


<template name="githubModal">
  <input type="hidden" class="form-control" placeholder="namespace" name="doi" value="{{ doi }}">
  <div class="input-group">
      <span class="input-group-addon" id="sizing-addon1">{{ modal.base_url }}</span>
      <input type="text" class="form-control" placeholder="namespace" name="namespace">
      <span class="input-group-addon" id="sizing-addon2">/</span>
      <input type="text" class="form-control" placeholder="reponame" name="reponame">
  </div>
  <textarea class="form-control"
            name="comment"
            id="Modalcomment"
            rows="10"
            placeholder="Tell us why this repository is relevant to this URI"></textarea>
</template>

<template name="SharedDirectory">
  <input type="hidden" class="form-control" placeholder="namespace" name="doi" value="{{ doi }}">
  <input type="text" class="form-control" placeholder="namespace" name="namespace">
  <textarea class="form-control"
            name="comment"
            id="Modalcomment"
            rows="10"
            placeholder="Tell us why this directory is relevant to this URI"></textarea>
</template>


<template name="SharedWorkspace">
  <input type="hidden" class="form-control" placeholder="namespace" name="doi" value="{{ doi }}">
  <input type="text" class="form-control" placeholder="namespace" name="namespace">
  <textarea class="form-control"
            name="comment"
            id="Modalcomment"
            rows="10"
            placeholder="Tell us why this workspace is relevant to this URI"></textarea>
</template>
