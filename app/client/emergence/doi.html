<template name="DOI">
  {{> ModalContext }}
  {{> DOI_Navbar }}
  {{> DOI_Body }}
</template>


<template name="DOI_Body">
  <div class="panel-body">
    <div class="row">
      <div class="col-md-3">
        {{> DOI_SideBar }}
      </div>
      <div class="col-md-9">
        {{> DOI_Main }}
      </div>
    </div>
  </div>
</template>


<template name="DOI_Main">
  {{> DOI_Summary }}
  {{> DOI_Citations }}
  {{> DOI_CitedBy }}
  {{> DOI_Related }}
</template>

<template name="ModalContext">
  {{! #if show_modal }}
    {{> Modal modalcontext }}
  {{! /if}}
</template>

<template name="Modal">
  <div class="modal fade" id="modal" tabindex="-1" role="dialog" aria-labelledby="{{ id }}Label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <form class="{{ callback }}">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title" id="myModalLabel">
                {{ title }}
            </h4>
          </div>
          <div class="modal-body">
            {{ body }}
          </div>
          <div class="well collapse out" id="help-well">
              <h5>Help</h5>
              <div id="#help-text">
                {{#if equals helps "" }}
                  Sorry, no help is available for that modal. If things are not clear,
                  please give us some feedbacks to help us making this website more relevant for you and your
                  research field.
                {{else}}
                  {{ helps }}
                {{/if}}
              </div>
          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-default">Feedbacks</button>
              <button type="button" class="btn btn-default" data-toggle="collapse" data-target="#help-well">Help</button>
              <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
              <button type="submit" class="btn btn-primary">Register</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</template>


<template name="DOI_pdf">
  <div class="panel panel-default">
      <div class="panel-heading clearfix">
        PDF
        <a class="get_pdf pull-right glyphicon glyphicon-plus" href="#" data-toggle="tooltip" data-placement="top" title="Add citation"></a>
      </div>
      {{#unless equals src ""}}
      <div class="panel-body collapse in" id="abstract">
        <a href="{{ src }}">{{ src }}</a>
      </div>
      {{/unless}}
  </div>
</template>

<template name="DOI_Summary">
  <div class="panel panel-default">
      <div class="panel-heading clearfix">
          <a class="accordion-toggle" href="#abstract"  data-toggle="collapse">Summary</a>
          <div class="btn-group pull-right">
            <a type="button" class="dropdown-toggle glyphicon glyphicon-plus" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            </a>
            <ul class="dropdown-menu">
              <li><a href="#">Add new</a></li>
              <li><a href="#">Fork</a></li>
            </ul>
          </div>
      </div>
      <div class="panel-body collapse in" id="abstract">{{ summary }}</div>
  </div>
</template>


<template name="DOI_Citations">
  <div class="panel panel-default">
    <div class="panel-heading">
      <a class="accordion-toggle" href="#citations" data-toggle="collapse">Citations</a>
        <a class="pull-right glyphicon glyphicon-plus" href="#" data-toggle="tooltip" data-placement="top" title="Add citation">
      </a>
    </div>
    <div class="panel-body collapse" id="citations">
      {{#each citation }}
        <div class="containter">
          {{ names }}. {{ year }}. {{ title }}.
        </div>
      {{/each}}
    </div>
  </div>
</template>


<template name="DOI_CitedBy">
  <div class="panel panel-default">
    <div class="panel-heading">
      <a class="accordion-toggle" href="#cited_by"  data-toggle="collapse">Cited By</a>
        <a href="#" class="pull-right glyphicon glyphicon-plus" data-toggle="tooltip" data-placement="top" title="Add citation">
      </a>
    </div>
    <div class="panel-body collapse"  id="cited_by">
      {{#each citation }}
        <div class="containter">
          {{ names }}. ({{ year }}). {{ title }}.
        </div>
      {{/each}}
    </div>
  </div>
</template>


<template name="DOI_Related">
  <div class="panel panel-default">
    <div class="panel-heading">Related Fractal Flows
      <a href="#" class="pull-right glyphicon glyphicon-plus rest-call" data-toggle="tooltip" data-placement="top" title="Add related"></a>
    </div>
    <div class="list-group" id="add-stuff-here">
      {{#each event }}
        <div  class="collapse in collap-{{ git.user }}-{{ git.repo }}">
          <div class="list-group-item">
            <span class="event-header">
              <img height="16" src="https://avatars1.githubusercontent.com/u/{{ actor.id }}?v=3&amp;s=32" width="16">
            </span>
            <a class="pull-right glyphicon glyphicon-education" aria-hidden="true" aria-label="Review" href="#"  data-toggle="tooltip" data-placement="top" title="Rate relevance"></a>
            {{#if equals type "PushEvent" }}
              <span class="message-type">
                <strong>New push</strong>
              </span>
                <span class="login">@{{ actor.login }}</span> <span class="date">{{ formatTime created_at }}</span>
                <ul>
                  {{#each payload.commits }}
                    <li><a href="https://github.com/{{ origine.user }}/{{ origine.repo }}/commits/{{ sha }}">{{ shortSHA sha }}</a>
                      {{ message }}
                    </li>
                  {{/each}}
                </ul>
            {{else}}
              {{#if equals type "IssueCommentEvent" }}
                <span class="message-type">
                  <strong>
                    New comment on Issue <span class="issue-title">"<em>{{ title }}</em>"</span>
                  </strong>
                </span>
                <span class="login">@{{ login }}</span> <span class="date">{{ formatTime created_at }}</span>
                <div class="comment">
                  {{ payload.comment.body }}
                </div>
              {{else}}
                <span class="message-type"><strong>{{ type }}</strong></span>
                <span class="login">@{{ actor.login }}</span>
                <span class="date">{{ formatTime created_at }}</span>
              {{/if}}
            {{/if}}
          </div>
        </div>
      {{/each}}
    </div>
  </div>
</template>
